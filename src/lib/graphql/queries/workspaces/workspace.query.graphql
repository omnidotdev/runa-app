query Workspace(
  $rowId: UUID!
  $userId: UUID!
  $userFilter: WorkspaceUserFilter
) {
  workspace(rowId: $rowId) {
    rowId
    name
    slug
    viewMode
    projectColumns(orderBy: INDEX_ASC) {
      nodes {
        emoji
        rowId
        title
        index
      }
    }
    projects(orderBy: NAME_ASC) {
      nodes {
        rowId
        name
        slug
        color
        prefix
        userPreferences(condition: { userId: $userId }) {
          nodes {
            hiddenColumnIds
            viewMode
            rowId
          }
        }
        projectColumn {
          title
          emoji
        }
        tasks {
          totalCount
        }
        columns {
          nodes {
            allTasks: tasks {
              totalCount
            }

            completedTasks: tasks(
              filter: { column: { title: { equalTo: "Done" } } }
            ) {
              totalCount
            }
          }
        }
      }
    }
    workspaceUsers(filter: $userFilter) {
      nodes {
        userId
      }
    }
  }
}
